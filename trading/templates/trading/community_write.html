{% extends "base_focus.html" %}
{% load static i18n %}

{% block title %}{% bilingual "Write an article" "撰写长文" %}{% endblock %}

{% block extra_head %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<link rel="stylesheet" href="https://unpkg.com/mathlive/dist/mathlive.core.css">
<link rel="stylesheet" href="https://unpkg.com/mathlive/dist/mathlive.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css">
<link rel="stylesheet" href="{% static 'trading/css/community.css' %}?v={{ STATIC_VERSION|default:'20260211-community-v2-base' }}">
<link rel="stylesheet" href="{% static 'trading/css/community_write_v2.css' %}?v={{ STATIC_VERSION|default:'20260211-community-write-v2' }}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" nonce="{{ csp_nonce }}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" nonce="{{ csp_nonce }}" defer></script>
<script src="https://unpkg.com/mathlive" nonce="{{ csp_nonce }}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js" nonce="{{ csp_nonce }}" defer></script>
<script src="https://cdn.jsdelivr.net/npm/quill-image-resize-module@3.0.0/image-resize.min.js" nonce="{{ csp_nonce }}" defer></script>
<script src="{% static 'trading/js/community_write.js' %}?v={{ STATIC_VERSION|default:'20260211-community-write-js-v2' }}" nonce="{{ csp_nonce }}" defer></script>
{% endblock %}

{% block content %}
<div class="community-write-page">
    <form method="post"
          enctype="multipart/form-data"
          data-role="write-form"
          data-edit-base="{% url 'trading:community_write' %}"
          data-drafts-endpoint="{% url 'trading:community_drafts' %}"
          data-delete-base="{% url 'trading:delete_post' post_id=0 %}">
        {% csrf_token %}
        <input type="hidden" name="action" value="publish" data-role="action-input">
        <input type="hidden" name="post_id" value="{{ draft_id }}" data-role="post-id">

        {% include "trading/includes/community/write_topbar.html" %}
        {% include "trading/includes/community/write_canvas.html" %}
        {% include "trading/includes/community/write_meta_drawers.html" %}
        {% include "trading/includes/community/write_modals.html" %}
        {% include "trading/includes/community/write_word_count.html" %}
    </form>
</div>
{% endblock %}
